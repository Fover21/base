{"root":{"data":{"id":"cf2c713da0de","created":1587722626,"text":"Django1.11.4之视图"},"children":[{"data":{"id":"c29cqu37j6o0","created":1587722758882,"text":"概述","expandState":"collapse"},"children":[{"data":{"id":"c29cqvuqwt40","created":1587722762723,"text":"作用","background":"#73a1bf"},"children":[{"data":{"id":"c29cqx1bj3s0","created":1587722765298,"text":"视图接收web请求，并响应web请求"},"children":[]}]},{"data":{"id":"c29crq0xpo00","created":1587722828401,"text":"本质","background":"#73a1bf"},"children":[{"data":{"id":"c29crrk0g4g0","created":1587722831731,"text":"视图就是一个Python函数"},"children":[]}]},{"data":{"id":"c29cs2dm9000","created":1587722855289,"text":"响应","background":"#73a1bf"},"children":[{"data":{"id":"c29cs3s3yqo0","created":1587722858342,"text":"网页"},"children":[{"data":{"id":"c29csht283k0","created":1587722888875,"text":"重定向"},"children":[]},{"data":{"id":"c29csk557oo0","created":1587722893959,"text":"错误视图"},"children":[{"data":{"id":"c29csltwnk00","created":1587722897633,"text":"404"},"children":[]},{"data":{"id":"c29csn5apj40","created":1587722900499,"text":"500"},"children":[]}]}]},{"data":{"id":"c29cs55vj7k0","created":1587722861352,"text":"JSON数据"},"children":[]}]},{"data":{"id":"c29ct3jokdc0","created":1587722936197,"text":"过程","expandState":"collapse","layout":null,"background":"#73a1bf"},"children":[{"data":{"id":"c29ctflmybc0","created":1587722962437,"text":"用户在浏览器输入网址","layout":null},"children":[]},{"data":{"id":"c29ctson1i00","created":1587722990916,"text":"Django获取网址信息","layout":null},"children":[{"data":{"id":"c29cu8tck3k0","created":1587723026030,"text":"去除ip与端口","layout":null},"children":[]}]},{"data":{"id":"c29cuhfjqw00","created":1587723044786,"text":"交给url管理器逐个匹配urlconf，匹配成功进入对应的视图函数","layout":null},"children":[]},{"data":{"id":"c29cv361k6w0","created":1587723092101,"text":"视图管理器找到对应的视图函数去执行，返回结果给浏览器","layout":null},"children":[]},{"data":{"id":"c29cx6ee0vk0","created":1587723255864,"text":"双击放大 ","image":"https://kityminder-img.gz.bcebos.com/ad8d8129d20302ed66ee4a18a4be06015709a68f","imageTitle":"图解","imageSize":{"width":200,"height":104}},"children":[]}]}]},{"data":{"id":"c29cy9mux0o0","created":1587723341271,"text":"url配置","expandState":"collapse"},"children":[{"data":{"id":"c29cybx78e80","created":1587723346249,"text":"配置流程","expandState":"expand"},"children":[{"data":{"id":"c29cydp6os80","created":1587723350118,"text":"制定根级url配置文件"},"children":[{"data":{"id":"c29cyta6gds0","created":1587723384040,"text":"settings.py文件"},"children":[]},{"data":{"id":"c29cywtb4rs0","created":1587723391727,"text":"ROOT_URLCONF = 'demo.urls'"},"children":[]},{"data":{"id":"c29cz543x5k0","created":1587723409794,"text":"默认已实现"},"children":[]}]},{"data":{"id":"c29czbtk6a80","created":1587723424393,"text":"urlpatterns"},"children":[{"data":{"id":"c29cze5wl800","created":1587723429494,"text":"一个url实例的列表"},"children":[]},{"data":{"id":"c29czhdhxgo0","created":1587723436483,"text":"里面存的是url对象"},"children":[{"data":{"id":"c29czotygps0","created":1587723452716,"text":"三个参数"},"children":[{"data":{"id":"c29czqvgjsw0","created":1587723457160,"text":"正则表达式"},"children":[]},{"data":{"id":"c29czv9mjs80","created":1587723466724,"text":"视图名称"},"children":[]},{"data":{"id":"c29czwuz4jc0","created":1587723470191,"text":"名称"},"children":[]}]}]}]},{"data":{"id":"c29d0bd8d9k0","created":1587723501770,"text":"url匹配正则的注意事项"},"children":[{"data":{"id":"c29d0gxbuhc0","created":1587723513869,"text":"如果想要从url中获取一个值，需要对正则加小括号"},"children":[{"data":{"id":"c29d0x5apx40","created":1587723549180,"text":"r'^(\\d+)/$'"},"children":[]},{"data":{"id":"c29d103vib40","created":1587723555624,"text":"匹配数字"},"children":[]}]},{"data":{"id":"c29d25jejt40","created":1587723645811,"text":"匹配正则前方不需要加反斜杠/"},"children":[]},{"data":{"id":"c29d2b4iqyo0","created":1587723657972,"text":"正则前需要加r表示字符串不转义"},"children":[]}]}]},{"data":{"id":"c29d2pyv2c00","created":1587723690282,"text":"引入其他url配置"},"children":[{"data":{"id":"c29d2t0rhko0","created":1587723696927,"text":"在应用中创建urls.py文件，定义本应用的url配置，方便不同项目的url管理，在工程urls文件中使用include()方法"},"children":[{"data":{"id":"c29d3hp7n5c0","created":1587723750648,"text":"include('myApp.urls')"},"children":[]}]},{"data":{"id":"c29d3s9oqw80","created":1587723773654,"text":"匹配过程"},"children":[{"data":{"id":"c29d4hklq480","created":1587723828733,"text":"project中的urls.py中匹配到某个项目"},"children":[]},{"data":{"id":"c29d4n9n9c80","created":1587723841132,"text":"进入匹配的项目再去匹配某个view"},"children":[]}]}]},{"data":{"id":"c29d54a8nio0","created":1587723878174,"text":"url的反向解析"},"children":[{"data":{"id":"c29d572l0o00","created":1587723884240,"text":"概述"},"children":[{"data":{"id":"c29d57uvmpk0","created":1587723885951,"text":"如果在视图、模板中使用了硬编码（即路径是写死的），在url配置发生改变时，动态生成链接的地址"},"children":[]}]},{"data":{"id":"c29e91867n40","created":1587727006084,"text":"解决"},"children":[{"data":{"id":"c29e92s9pio0","created":1587727009476,"text":"在使用连接时，通过url配置的名称，动态生成url地址"},"children":[]}]},{"data":{"id":"c29e9a620kg0","created":1587727025547,"text":"作用"},"children":[{"data":{"id":"c29e9csz5tk0","created":1587727031287,"text":"使用url模板"},"children":[]}]}]}]},{"data":{"id":"c29edkeu56w0","created":1587727361302,"text":"视图函数","expandState":"collapse"},"children":[{"data":{"id":"c29edyqoyuo0","created":1587727392494,"text":"定义视图"},"children":[{"data":{"id":"c29ee161qjs0","created":1587727397776,"text":"本质：一个函数"},"children":[]},{"data":{"id":"c29ee48yjj40","created":1587727404483,"text":"视图参数"},"children":[{"data":{"id":"c29ee8d9ah40","created":1587727413450,"text":"一个HTTPrequest的实例，是浏览器发过来的"},"children":[]},{"data":{"id":"c29eeqtlznk0","created":1587727453621,"text":"通过正则表达式获取的参数"},"children":[]}]},{"data":{"id":"c29ef0rf2ko0","created":1587727475256,"text":"位置"},"children":[{"data":{"id":"c29ef2016hs0","created":1587727477954,"text":"一般在views.py文件下"},"children":[]}]}]},{"data":{"id":"c29efr2eykw0","created":1587727532517,"text":"错误视图"},"children":[{"data":{"id":"c29efsri8v40","created":1587727536212,"text":"404"},"children":[{"data":{"id":"c29huywgjzk0","created":1587737188364,"text":"找不到网页时（url匹配不成功）返回"},"children":[]},{"data":{"id":"c29hv9cqswo0","created":1587737211116,"text":"在templates目录下定义404.html"},"children":[{"data":{"id":"c29hwc4csco0","created":1587737295503,"text":"request_path"},"children":[{"data":{"id":"c29hwfbunyo0","created":1587737302487,"text":"导致错误的网址"},"children":[]}]}]},{"data":{"id":"c29hwy9d8bk0","created":1587737343696,"text":"配置settings.py"},"children":[{"data":{"id":"c29hxas6vow0","created":1587737370955,"text":"DEBUG = True"},"children":[{"data":{"id":"c29hxmcxry00","created":1587737396154,"text":"如果为True则永远不调用404.HTML"},"children":[]}]},{"data":{"id":"c29hxc2h1q00","created":1587737373754,"text":"ALLOWED_HOSTS = ['*']"},"children":[]}]}]},{"data":{"id":"c29eftyanz40","created":1587727538798,"text":"500"},"children":[{"data":{"id":"c29httchivk0","created":1587737097908,"text":"在视图代码中出现错误（服务器代码）"},"children":[]}]},{"data":{"id":"c29efur7llc0","created":1587727540547,"text":"400"},"children":[{"data":{"id":"c29hupjo2qo0","created":1587737167999,"text":"错误出现在客户的操作"},"children":[]}]}]}]},{"data":{"id":"c29hzsouuww0","created":1587737566664,"text":"HttpRequest对象","background":"#4bacc6","color":"#ff0000","expandState":"collapse"},"children":[{"data":{"id":"c29i24mey140","created":1587737749366,"text":"概述","expandState":"collapse"},"children":[{"data":{"id":"c29i2632vug0","created":1587737752550,"text":"服务器接收http请求后，会根据报文创建一个HttpRequest对象"},"children":[]},{"data":{"id":"c29i2mam19s0","created":1587737787834,"text":"视图的第一个参数就是HttpRequest对象"},"children":[]},{"data":{"id":"c29i2z8eviw0","created":1587737816000,"text":"HttpRequest对象是Django创建的，之后调用视图时传递给视图"},"children":[]}]},{"data":{"id":"c29i3kli10o0","created":1587737862503,"text":"属性","expandState":"collapse"},"children":[{"data":{"id":"c29i3p4heuo0","created":1587737872358,"text":"path"},"children":[{"data":{"id":"c29i3szdfnc0","created":1587737880756,"text":"请求的完整路径（不包括域名和端口）"},"children":[]}]},{"data":{"id":"c29i3pkfueg0","created":1587737873323,"text":"method"},"children":[{"data":{"id":"c29i46vlwps0","created":1587737911004,"text":"表示请求的方式"},"children":[{"data":{"id":"c29i4btkyxs0","created":1587737921765,"text":"GET"},"children":[]},{"data":{"id":"c29i4daixzs0","created":1587737924966,"text":"POST"},"children":[]}]}]},{"data":{"id":"c29i3pmafj40","created":1587737873435,"text":"encoding"},"children":[{"data":{"id":"c29i4lfio3c0","created":1587737942683,"text":"表示浏览器提交的数据的编码方式"},"children":[{"data":{"id":"c29i4uss9m80","created":1587737963076,"text":"一般为utf-8"},"children":[]}]}]},{"data":{"id":"c29i3po078w0","created":1587737873539,"text":"GET"},"children":[{"data":{"id":"c29i7umppe00","created":1587738197801,"text":"类似字典的对象，包含了get请求的所有参数"},"children":[]}]},{"data":{"id":"c29i3ppzcio0","created":1587737873658,"text":"POST"},"children":[{"data":{"id":"c29i8dplum00","created":1587738239335,"text":"类似字典的对象，包含了post请求的所有参数"},"children":[]}]},{"data":{"id":"c29i3prkepc0","created":1587737873754,"text":"FILES"},"children":[{"data":{"id":"c29i8ohhzxc0","created":1587738262789,"text":"类似字典的对象，包含了所有上传的文件"},"children":[]}]},{"data":{"id":"c29i95ea6600","created":1587738299600,"text":"COOKIES"},"children":[{"data":{"id":"c29i9b18o000","created":1587738311872,"text":"字典，包含所有的cookie"},"children":[]}]},{"data":{"id":"c29i96akr140","created":1587738301553,"text":"session"},"children":[{"data":{"id":"c29i9grwnvk0","created":1587738324369,"text":"类似字典的对象，表示当前的会话"},"children":[]}]}]},{"data":{"id":"c29i3nyvtt40","created":1587737869843,"text":"方法"},"children":[{"data":{"id":"c29i9rtp5cw0","created":1587738348422,"text":"is_ajax()"},"children":[{"data":{"id":"c29i9v7ykjk0","created":1587738355814,"text":"如果是通过XMLHttpRequest发起的，返回True"},"children":[]}]}]},{"data":{"id":"c29iaovck800","created":1587738420355,"text":"Quertict对象","expandState":"collapse"},"children":[{"data":{"id":"c29iatqe5z40","created":1587738430939,"text":"request对象中的GET，POST都属于QueryDict对象"},"children":[]},{"data":{"id":"c29ib2u3wg00","created":1587738450755,"text":"方法"},"children":[{"data":{"id":"c29ib79eoe80","created":1587738460387,"text":"get()"},"children":[{"data":{"id":"c29ibbepg1k0","created":1587738469415,"text":"作用：根据键获取值"},"children":[]},{"data":{"id":"c29ibqpsr5k0","created":1587738502737,"text":"只能获取一个值"},"children":[]},{"data":{"id":"c29ibvq408o0","created":1587738513640,"text":"www.zcz.com/abc?a=1&b=2&c=3"},"children":[]}]},{"data":{"id":"c29ib93t5080","created":1587738464402,"text":"getlist()"},"children":[{"data":{"id":"c29ibl1v0tc0","created":1587738490406,"text":"作用：将键的值以列表的形式返回"},"children":[]},{"data":{"id":"c29ibsvpk200","created":1587738507448,"text":"可以获取多个值"},"children":[]},{"data":{"id":"c29ic9xk7zk0","created":1587738544566,"text":"www.zcz.com/abc?a=1&a=2........"},"children":[{"data":{"id":"c29icildiz40","created":1587738563420,"text":"两个a都可以取到，但get()做不到"},"children":[]}]}]}]}]},{"data":{"id":"c29ij4d2ih40","created":1587739080992,"text":"GET属性","expandState":"collapse"},"children":[{"data":{"id":"c29ij691e4g0","created":1587739085102,"text":"http://127.0.0.1:8000/get1?a=1&b=2&c=3","expandState":"expand"},"children":[{"data":{"id":"c29iqdgdmwo0","created":1587739649332,"text":"# TODO 获取get传递的数据\ndef get1(request):\n\ta = request.GET.get('a')\n\tb = request.GET.get('b')\n\tc = request.GET.get('c')\n\treturn HttpResponse(a + '  ' + b + '  ' + c)"},"children":[]}]},{"data":{"id":"c29ijoeki5s0","created":1587739124618,"text":"http://127.0.0.1:8000/get2?a=1&a=2&b=3&c=3","expandState":"expand"},"children":[{"data":{"id":"c29iqo62a2w0","created":1587739672653,"text":"def get2(request):\n\ta = request.GET.getlist('a')\n\ta1 = a[0]\n\ta2 = a[1]\n\tb = request.GET.get('b')\n\tc = request.GET.get('c')\n   return HttpResponse(a1 + '  ' + a2 + '  ' + b + '  ' + c)"},"children":[]}]}]},{"data":{"id":"c29ir4ty9400","created":1587739708926,"text":"POST属性","expandState":"collapse"},"children":[{"data":{"id":"c29ir6shq5k0","created":1587739713191,"text":"使用表单提交实现post请求"},"children":[]},{"data":{"id":"c29j0linmi00","created":1587740450526,"text":"关闭csrf"},"children":[{"data":{"id":"c29j0oujkbc0","created":1587740457775,"text":"注释掉sdttings.py的MIDDLEWARE中的某行"},"children":[{"data":{"id":"c29j16a5x4w0","created":1587740495725,"text":"#'django.middleware.csrf.CsrfViewMiddleware',"},"children":[]}]}]},{"data":{"id":"c29j2nrbaf40","created":1587740612131,"text":"def showregister(request):\n\treturn render(request, 'myApp/register.html')\n\n\ndef register(request):\n\tname = request.POST.get('name')\n\treturn HttpResponse(name)"},"children":[]}]}]},{"data":{"id":"c29j3d7ezc00","created":1587740667524,"text":"HttpResponse对象","color":"#ff0000","expandState":"collapse","background":"#73a1bf"},"children":[{"data":{"id":"c29j3mmj19c0","created":1587740688029,"text":"概述","expandState":"collapse"},"children":[{"data":{"id":"c29j3o229ew0","created":1587740691145,"text":"作用：给浏览器返回数据"},"children":[]},{"data":{"id":"c29j483pyko0","created":1587740734781,"text":"HttpRequest对象是由Django创建的，HttpResponse对象是程序员创建"},"children":[]}]},{"data":{"id":"c29j4lsvu080","created":1587740764601,"text":"返回的用法","expandState":"collapse"},"children":[{"data":{"id":"c29j4ponpi80","created":1587740773052,"text":"不调用模板，直接返回数据"},"children":[{"data":{"id":"c29j5acz9fc0","created":1587740818059,"text":"def index(request):\n   return HttpResponse('zcz is a goood boy. ')"},"children":[]}]},{"data":{"id":"c29j4uj77080","created":1587740783606,"text":"调用模板"},"children":[{"data":{"id":"c29j5eky4m80","created":1587740827248,"text":"使用render方法"},"children":[{"data":{"id":"c29j5hqhgdc0","created":1587740834113,"text":"原型"},"children":[{"data":{"id":"c29j5octkiw0","created":1587740848524,"text":"render(request, templateName, [content])"},"children":[]}]},{"data":{"id":"c29j5ipgp3k0","created":1587740836228,"text":"作用"},"children":[{"data":{"id":"c29j64ilnpc0","created":1587740883702,"text":"结合数据和模板，返回完成的HTML"},"children":[]}]},{"data":{"id":"c29j5jxylyw0","created":1587740838918,"text":"参数"},"children":[{"data":{"id":"c29j6ej7g340","created":1587740905506,"text":"request"},"children":[{"data":{"id":"c29j6m02nx40","created":1587740921764,"text":"请求体对象"},"children":[]}]},{"data":{"id":"c29j6g4ni3s0","created":1587740908980,"text":"templateName"},"children":[{"data":{"id":"c29j6o7396w0","created":1587740926542,"text":"模板路径"},"children":[]}]},{"data":{"id":"c29j6jm7obk0","created":1587740916572,"text":"content"},"children":[{"data":{"id":"c29j6q6mvio0","created":1587740930868,"text":"传递给需要渲染在模板上的数据"},"children":[]}]}]},{"data":{"id":"c29j5l4azwg0","created":1587740841479,"text":"示例","expandState":"expand"},"children":[{"data":{"id":"c29j7e1ujuw0","created":1587740982821,"text":"def showregister(request):\n   return render(request, 'myApp/register.html')"},"children":[]}]}]}]}]},{"data":{"id":"c29j8a2s0dc0","created":1587741052534,"text":"属性","expandState":"collapse"},"children":[{"data":{"id":"c29j8b427k80","created":1587741054789,"text":"content"},"children":[{"data":{"id":"c29j8gzeie00","created":1587741067568,"text":"表示返回的内容的类型"},"children":[]}]},{"data":{"id":"c29j8bmasuo0","created":1587741055891,"text":"charset"},"children":[{"data":{"id":"c29j93i38680","created":1587741116587,"text":"编码格式"},"children":[]}]},{"data":{"id":"c29j8bp3wvs0","created":1587741056061,"text":"status_code"},"children":[{"data":{"id":"c29j98422f40","created":1587741126622,"text":"响应状态码"},"children":[{"data":{"id":"c29j9dn8w280","created":1587741138666,"text":"200"},"children":[]},{"data":{"id":"c29j9eohkrk0","created":1587741140918,"text":"304"},"children":[]},{"data":{"id":"c29j9h63q540","created":1587741146337,"text":"404"},"children":[]}]}]},{"data":{"id":"c29j8bryhk00","created":1587741056234,"text":"content-type"},"children":[{"data":{"id":"c29j9sf4ae00","created":1587741170827,"text":"指定输出的MIME类型"},"children":[]}]}]},{"data":{"id":"c29jelc2x000","created":1587741547226,"text":"方法","expandState":"collapse"},"children":[{"data":{"id":"c29jen8q69k0","created":1587741551377,"text":"init"},"children":[{"data":{"id":"c29jevlxrsg0","created":1587741569590,"text":"使用页面的内容实例化HttpResponse对象"},"children":[]}]},{"data":{"id":"c29jeoe8t7s0","created":1587741553887,"text":"write(content)"},"children":[{"data":{"id":"c29jf67sih40","created":1587741592679,"text":"以文件的形式写入"},"children":[]}]},{"data":{"id":"c29jerf3fl40","created":1587741560469,"text":"flush()"},"children":[{"data":{"id":"c29jf94rhb40","created":1587741599027,"text":"以文件的形式输出缓冲区"},"children":[]}]},{"data":{"id":"c29jfij2rs00","created":1587741619483,"text":"set_cookie(key, value, max_age=None, expires = None)"},"children":[]},{"data":{"id":"c29jg8xgpgo0","created":1587741676949,"text":"delete_cookie(key)"},"children":[{"data":{"id":"c29jggjt0680","created":1587741693538,"text":"删除cookie"},"children":[]},{"data":{"id":"c29jgk0jksw0","created":1587741701080,"text":"注意"},"children":[{"data":{"id":"c29jgmnlcyw0","created":1587741706828,"text":"如果cookie不存在，则当什么都没发生"},"children":[]}]}]}]},{"data":{"id":"c29uyg6v82g0","created":1587774135519,"text":"子类HttpResponseRedirect","expandState":"collapse"},"children":[{"data":{"id":"c29uza6zm4o0","created":1587774200830,"text":"功能","expandState":"expand"},"children":[{"data":{"id":"c29uzbu7ehc0","created":1587774204411,"text":"重定向，服务器端跳转"},"children":[{"data":{"id":"c29vhgazi8g0","created":1587775624688,"text":"# 重定向\ndef redirect1(request):\n\treturn HttpResponseRedirect(\"/redirect2/\")\n\ndef redirect2(request):\n\treturn HttpResponse('我是重定向后的视图')"},"children":[]},{"data":{"id":"c29vhk0nu2w0","created":1587775632770,"text":"注意，/redirect2/是绝对路径， 不加第一个单斜杠是相对路径"},"children":[]}]}]},{"data":{"id":"c29vi3398vk0","created":1587775674286,"text":"简写","expandState":"expand"},"children":[{"data":{"id":"c29vi4qc4gg0","created":1587775677859,"text":"redirect(to,)"},"children":[{"data":{"id":"c29vj2xu9sw0","created":1587775752323,"text":"# 重定向\ndef redirect1(request):\n\t# return HttpResponseRedirect(\"/redirect2/\")\n\treturn redirect('/redirect2')"},"children":[]}]}]},{"data":{"id":"c29vjd06ids0","created":1587775774232,"text":"to推荐使用反向解析"},"children":[]}]},{"data":{"id":"c29uykrgfmw0","created":1587774145471,"text":"子类JsonResponse"},"children":[{"data":{"id":"c29vk44m8eo0","created":1587775833274,"text":"返回json数据，一般用于异步请求（ajax）"},"children":[]},{"data":{"id":"c29vkes9hz40","created":1587775856471,"text":"__init__(self, data)"},"children":[]},{"data":{"id":"c29vl3qi0v40","created":1587775910784,"text":"data"},"children":[{"data":{"id":"c29vl61m6o80","created":1587775915810,"text":"字典的对象"},"children":[]}]},{"data":{"id":"c29vl9xoheo0","created":1587775924279,"text":"注意"},"children":[{"data":{"id":"c29vlbbnhpc0","created":1587775927301,"text":"Content-type类型为application/json"},"children":[]}]}]}]},{"data":{"id":"c29uyri3dm00","created":1587774160143,"text":"状态保持"},"children":[{"data":{"id":"c29vmrvtyko0","created":1587776041713,"text":"http协议是无状态的，每次请求都是一次新的请求，不记得以前的请求"},"children":[]},{"data":{"id":"c29vpb3xfs80","created":1587776240290,"text":"客户端与服务器端的一次通信就是一次会话"},"children":[]},{"data":{"id":"c29vpkdws9s0","created":1587776260485,"text":"实现状态的保持，就在客户端或服务端存储有关会话的数据"},"children":[]},{"data":{"id":"c29vqaikuo00","created":1587776317363,"text":"存储方式"},"children":[{"data":{"id":"c29vqdcrzs00","created":1587776323543,"text":"cookie"},"children":[{"data":{"id":"c29vqtmf8uo0","created":1587776358955,"text":"所有数据都存储在客户端，但不要存储敏感数据"},"children":[]}]},{"data":{"id":"c29vqf6cieo0","created":1587776327508,"text":"session"},"children":[{"data":{"id":"c29vr7f3lmw0","created":1587776388987,"text":"所有数据存储在服务端，在客户端用cookie存储session_id"},"children":[]}]}]},{"data":{"id":"c29vptg5q9s0","created":1587776280212,"text":"状态保持的目的","expandState":"expand"},"children":[{"data":{"id":"c29vsfrmn3k0","created":1587776485523,"text":"在一段时间内跟踪请求者的状态，可以实现跨页面访问当前的请求者的数据","expandState":"expand"},"children":[]},{"data":{"id":"c29vpthvv340","created":1587776280316,"text":"注意"},"children":[{"data":{"id":"c29vt8jgr5c0","created":1587776548156,"text":"不同的请求者之间不会共享数据"},"children":[]}]}]},{"data":{"id":"c29vptkcqa00","created":1587776280465,"text":"启用session"},"children":[{"data":{"id":"c29vueyc5s00","created":1587776640480,"text":"settings.py文件中"},"children":[{"data":{"id":"c29vuhcxt7s0","created":1587776645717,"text":"INSTALLED_APPS"},"children":[{"data":{"id":"c29vukpnia80","created":1587776653016,"text":"'django.contrib.sessions',"},"children":[]}]},{"data":{"id":"c29vur66m7c0","created":1587776667076,"text":"MIDDLEWARE"},"children":[{"data":{"id":"c29vuv0pdmg0","created":1587776675452,"text":"'django.contrib.sessions.middleware.SessionMiddleware',"},"children":[]}]}]},{"data":{"id":"c29vv2mz7ds0","created":1587776692036,"text":"默认启用"},"children":[]}]},{"data":{"id":"c29vtk8sdgw0","created":1587776573632,"text":"使用session"},"children":[{"data":{"id":"c29vvtpg9940","created":1587776750959,"text":"启用session后，每个HttpRequest对象都有一个session属性，就是一个类似字典的对象"},"children":[]},{"data":{"id":"c29vwjabax40","created":1587776806640,"text":"get(key, default=None)"},"children":[{"data":{"id":"c29vwoltzt40","created":1587776818220,"text":"根据键获取session值"},"children":[]}]},{"data":{"id":"c29vwvr3djc0","created":1587776833776,"text":"clear()"},"children":[{"data":{"id":"c29vwygabfc0","created":1587776839653,"text":"清空所有的会话"},"children":[]}]},{"data":{"id":"c29vx2c25eo0","created":1587776848104,"text":"flush()"},"children":[{"data":{"id":"c29vx579ro80","created":1587776854345,"text":"删除当前会话并删除cookie中对应的session_id"},"children":[]}]},{"data":{"id":"c29wzvntba80","created":1587779889780,"text":"实例","expandState":"collapse"},"children":[{"data":{"id":"c29wzx5f2ps0","created":1587779893022,"text":"def main(request):\n\tusername = request.session.get('uname', '游客')\n\treturn render(request, 'myApp/main.html', {'username': username})\n\n\ndef login(request):\n\treturn render(request, 'myApp/login.html')\n\n\ndef showmain(request):\n\tuname = request.POST.get('username')\n\tprint('---------')\n\trequest.session['uname'] = uname\n\treturn redirect('/main/')\n\n\n# 清除 session\ndef clear(request):\n\t#1 logout(request)\n\t#2 request.session.clear()\n\t#3 request.session.flush()\n\treturn redirect('/main/')"},"children":[]}]}]},{"data":{"id":"c29vtkw6di00","created":1587776575046,"text":"设置过期时间"},"children":[{"data":{"id":"c29x09atty80","created":1587779919470,"text":"set_expiry(value)"},"children":[]},{"data":{"id":"c29x0gfj88g0","created":1587779934992,"text":"如果不设置，两个星期后过期"},"children":[]},{"data":{"id":"c29x0o7tyxk0","created":1587779951940,"text":"整数"},"children":[]},{"data":{"id":"c29x1vc9fj40","created":1587780045810,"text":"时间对象"},"children":[]},{"data":{"id":"c29x1yhdqa00","created":1587780052650,"text":"0"},"children":[{"data":{"id":"c29x22ut3d40","created":1587780062169,"text":"关闭浏览器时失效"},"children":[]}]},{"data":{"id":"c29x2ay6yew0","created":1587780079787,"text":"None"},"children":[{"data":{"id":"c29x2c9baow0","created":1587780082637,"text":"永不过期"},"children":[]}]}]},{"data":{"id":"c29vpto3frs0","created":1587776280692,"text":"存储session的位置"},"children":[{"data":{"id":"c29x68ofgzk0","created":1587780388300,"text":"数据库"},"children":[{"data":{"id":"c29x6b9ycmg0","created":1587780393955,"text":"默认在数据库"},"children":[{"data":{"id":"c29x7gvx2b40","created":1587780484531,"text":"SESSION_ENGINE"},"children":[]}]}]},{"data":{"id":"c29x6e7m5wg0","created":1587780400344,"text":"缓存"},"children":[{"data":{"id":"c29x6fql9xk0","created":1587780403668,"text":"只存储在本地内存中，如果丢失不能找回，比数据库块"},"children":[]}]},{"data":{"id":"c29x6qjny1s0","created":1587780427194,"text":"数据库+缓存"},"children":[{"data":{"id":"c29x6t20nfs0","created":1587780432657,"text":"优先从本地缓存中读取，读取不到再去数据库中读取"},"children":[]}]}]},{"data":{"id":"c29x45af16o0","created":1587780224194,"text":"使用redis缓存session"},"children":[{"data":{"id":"c29x7x5xqs00","created":1587780519966,"text":"pip install django-redis-sessions"},"children":[]},{"data":{"id":"c29x82pj6e80","created":1587780532035,"text":"settings.py文件添加","expandState":"expand"},"children":[{"data":{"id":"c29x87f8rww0","created":1587780542296,"text":"SESSION_ENGINE = 'redis_sessions.session'\nSESSION_REDIS_HOST = 'localhost'\nSESSION_REDIS_PORT = 6379\nSESSION_REDIS_DB = 0\nSESSION_REDIS_PASSWORD = '123456'\nSESSION_REDIS_PREFIX = 'session'"},"children":[]}]}]}]}]},"template":"right","theme":"snow","version":"1.4.43"}